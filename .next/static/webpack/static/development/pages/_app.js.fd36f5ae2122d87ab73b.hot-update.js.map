{"version":3,"file":"static/webpack/static/development/pages/_app.js.fd36f5ae2122d87ab73b.hot-update.js","sources":["webpack:///./lib/UserProvider.tsx"],"sourcesContent":["import React, { Component, createContext } from \"react\";\nimport { myFirebase } from \"./firebase\";\nimport {User, Employer} from '../model/model'\nimport {getEmployer, getUser} from './server'\nimport Router from \"next/router\";\n\nexport const UserContext = createContext<User | Employer | null>(null);\nclass UserProvider extends Component {\n  state = {\n    user: null\n  };\n\n  componentDidMount = () => {\n    myFirebase.auth().onAuthStateChanged(async (userAuth) => {\n        const user = await getUser(userAuth.uid)\n        const employer = await getEmployer(userAuth.uid)\n\n        if (user['user_exists'] == undefined) {\n            this.setState({user: user as User});\n            Router.push('/dashboard_user')\n        } else if (employer['employer_exists'] == undefined) {\n            this.setState({user: employer as Employer});\n            Router.push('/dashboard_employer')\n        } else {\n            // Works for both\n            this.setState({user: {\n                email: userAuth.email,\n                id: userAuth.uid,\n                firstName: userAuth.displayName.substr(0, userAuth.displayName.indexOf(' ')),\n                lastName: userAuth.displayName.substr(userAuth.displayName.indexOf(' ')+1),\n            }});\n        }\n    });\n  };\n  render() {\n    return (\n      <UserContext.Provider value={this.state.user}>\n        {this.props.children}\n      </UserContext.Provider>\n    );\n  }\n}\nexport default UserProvider;"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AADA;AACA;AAFA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAMA;AACA;AACA;AA1BA;AACA;AA0BA;AACA;AACA;AAAA;AAIA;AACA;AAlCA;AACA;AAkCA;;;;A","sourceRoot":""}