{"ast":null,"code":"import React, { useEffect, useContext, useState } from 'react';\nimport { getGradedDesigners } from '../../../lib/server';\nimport { UserContext } from '../../../lib/UserProvider';\nimport Loading from '../../General/Loading';\nimport DesignerList from './DesignerList';\nimport { storage_ref } from '../../../lib/firebase';\nimport _ from 'lodash';\n\nconst FindDesigners = props => {\n  const {\n    currentUser,\n    changeUser\n  } = useContext(UserContext);\n  const [designerList, setDesignerList] = useState(undefined);\n  useEffect(() => {\n    var id = currentUser.id;\n\n    if (currentUser.isAnonymous !== undefined) {\n      id = \"60fff552-280b-47ae-b632-25a744a7a910\";\n    }\n\n    getGradedDesigners(id).then(commList => {\n      const updatedList = _.map(commList, async user => {\n        let profilePic = '';\n\n        if (user.profilePic !== undefined) {\n          try {\n            profilePic = await storage_ref.child('profilePic/' + user.profilePic).getDownloadURL();\n          } catch (e) {\n            console.error(e);\n          }\n        }\n\n        return await {\n          name_feedback: [user.firstName + \" \" + user.lastName, user.grade.response, profilePic],\n          score: user.grade.score,\n          location: user.location,\n          primary_skill: user.designType,\n          contact: user\n        };\n      });\n\n      console.log(updatedList);\n      setDesignerList(updatedList);\n    });\n  }, [currentUser]);\n\n  if (designerList === undefined) {\n    return /*#__PURE__*/React.createElement(Loading, null);\n  }\n\n  return /*#__PURE__*/React.createElement(DesignerList, {\n    designerList: designerList\n  });\n};\n\nexport default FindDesigners;","map":{"version":3,"sources":["/Users/insanity/Documents/Sumpixel/sumpixel/client/components/Dashboard/Employer/FindDesigners.tsx"],"names":["React","useEffect","useContext","useState","getGradedDesigners","UserContext","Loading","DesignerList","storage_ref","_","FindDesigners","props","currentUser","changeUser","designerList","setDesignerList","undefined","id","isAnonymous","then","commList","updatedList","map","user","profilePic","child","getDownloadURL","e","console","error","name_feedback","firstName","lastName","grade","response","score","location","primary_skill","designType","contact","log"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,UAA1B,EAAsCC,QAAtC,QAAqD,OAArD;AACA,SAASC,kBAAT,QAAmC,qBAAnC;AAEA,SAAQC,WAAR,QAA0B,2BAA1B;AACA,OAAOC,OAAP,MAAoB,uBAApB;AAEA,OAAOC,YAAP,MAAiD,gBAAjD;AACA,SAAQC,WAAR,QAA0B,uBAA1B;AACA,OAAOC,CAAP,MAAc,QAAd;;AAEA,MAAMC,aAAuB,GAAIC,KAAD,IAAW;AACvC,QAAM;AAACC,IAAAA,WAAD;AAAcC,IAAAA;AAAd,MAA6BX,UAAU,CAACG,WAAD,CAA7C;AACA,QAAM,CAACS,YAAD,EAAeC,eAAf,IAAkCZ,QAAQ,CAAqCa,SAArC,CAAhD;AAEAf,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIgB,EAAE,GAAGL,WAAW,CAACK,EAArB;;AACA,QAAKL,WAAD,CAA0BM,WAA1B,KAA0CF,SAA9C,EAAyD;AACrDC,MAAAA,EAAE,GAAG,sCAAL;AACH;;AACDb,IAAAA,kBAAkB,CAACa,EAAD,CAAlB,CAAuBE,IAAvB,CAA6BC,QAAD,IAAsB;AAC9C,YAAMC,WAAW,GAAGZ,CAAC,CAACa,GAAF,CAAMF,QAAN,EAAgB,MAAOG,IAAP,IAAsB;AAEtD,YAAIC,UAAU,GAAG,EAAjB;;AACA,YAAID,IAAI,CAACC,UAAL,KAAoBR,SAAxB,EAAmC;AAC/B,cAAI;AACAQ,YAAAA,UAAU,GAAG,MAAMhB,WAAW,CAACiB,KAAZ,CAAkB,gBAAgBF,IAAI,CAACC,UAAvC,EAAmDE,cAAnD,EAAnB;AACH,WAFD,CAEE,OAAOC,CAAP,EAAU;AACRC,YAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACH;AACJ;;AACD,eAAO,MAAM;AACTG,UAAAA,aAAa,EAAE,CAAEP,IAAI,CAACQ,SAAL,GAAiB,GAAjB,GAAuBR,IAAI,CAACS,QAA9B,EAAyCT,IAAI,CAACU,KAAL,CAAWC,QAApD,EAA8DV,UAA9D,CADN;AAETW,UAAAA,KAAK,EAAEZ,IAAI,CAACU,KAAL,CAAWE,KAFT;AAGTC,UAAAA,QAAQ,EAAEb,IAAI,CAACa,QAHN;AAITC,UAAAA,aAAa,EAAEd,IAAI,CAACe,UAJX;AAKTC,UAAAA,OAAO,EAAEhB;AALA,SAAb;AAOH,OAjBmB,CAApB;;AAkBAK,MAAAA,OAAO,CAACY,GAAR,CAAYnB,WAAZ;AACAN,MAAAA,eAAe,CAACM,WAAD,CAAf;AACH,KArBD;AAsBH,GA3BQ,EA2BN,CAACT,WAAD,CA3BM,CAAT;;AA6BA,MAAIE,YAAY,KAAKE,SAArB,EAAgC;AAC5B,wBAAQ,oBAAC,OAAD,OAAR;AACH;;AACD,sBAAQ,oBAAC,YAAD;AAAc,IAAA,YAAY,EAAEF;AAA5B,IAAR;AACH,CArCD;;AAuCA,eAAeJ,aAAf","sourcesContent":["import React, {useEffect, useContext, useState} from 'react'\nimport { getGradedDesigners } from '../../../lib/server'\nimport { User } from '../../../model/model'\nimport {UserContext} from '../../../lib/UserProvider'\nimport Loading from '../../General/Loading'\nimport {Employer} from '../../../model/model'\nimport DesignerList, {FindDesignerListType} from './DesignerList'\nimport {storage_ref} from '../../../lib/firebase'\nimport _ from 'lodash'\n\nconst FindDesigners: React.FC = (props) => {\n    const {currentUser, changeUser}  = useContext(UserContext)\n    const [designerList, setDesignerList] = useState<FindDesignerListType[] | undefined>(undefined)\n\n    useEffect(() => {\n        var id = currentUser.id\n        if ((currentUser as Employer).isAnonymous !== undefined) {\n            id = \"60fff552-280b-47ae-b632-25a744a7a910\"\n        }\n        getGradedDesigners(id).then((commList: User[]) => {\n            const updatedList = _.map(commList, async (user: User) => {\n\n                let profilePic = ''\n                if (user.profilePic !== undefined) {\n                    try {\n                        profilePic = await storage_ref.child('profilePic/' + user.profilePic).getDownloadURL()\n                    } catch (e) {\n                        console.error(e)\n                    }\n                }\n                return await {\n                    name_feedback: [(user.firstName + \" \" + user.lastName), user.grade.response, profilePic],\n                    score: user.grade.score,\n                    location: user.location,\n                    primary_skill: user.designType,\n                    contact: user\n                }\n            })\n            console.log(updatedList)\n            setDesignerList(updatedList)\n        })\n    }, [currentUser])\n\n    if (designerList === undefined) {\n        return (<Loading />)\n    }\n    return (<DesignerList designerList={designerList}/>)\n}\n\nexport default FindDesigners"]},"metadata":{},"sourceType":"module"}