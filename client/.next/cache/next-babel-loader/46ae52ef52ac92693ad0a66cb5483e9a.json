{"ast":null,"code":"import React, { useEffect, useState, useContext } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport SimpleNavigationBar from '../../components/Profile/SimpleNavigationBar';\nimport Head from 'next/head';\nimport Loading from '../../components/General/Loading';\nimport { getUser, createCommunication } from '../../lib/server';\nimport { Background } from '../dashboard_employer';\nimport { Typography, message } from 'antd';\nimport { UserContext } from '../../lib/UserProvider';\nimport TextAboveAnswer from '../../components/Profile/TextAboveAnswer';\nimport styled from 'styled-components';\nimport { storage_ref } from '../../lib/firebase';\nimport { BigBlackButton } from '../../components/General/BigBlackButton';\nconst TextContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 75%;\n    justify-content: space-between;\n    padding-top: 15px;\n    padding-bottom: 40px;\n`;\nconst UpperFullContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n    padding-right: 40px;\n`;\n\nconst Profile = () => {\n  const {\n    currentUser,\n    changeUser\n  } = useContext(UserContext);\n  const router = useRouter();\n  const {\n    profile_id\n  } = router.query;\n  const [currentProfile, changeCurrentProfile] = useState(undefined);\n  const [profileString, changeProfileString] = useState('Profile');\n  const showStats = currentUser !== null && currentUser.companyName !== undefined;\n  useEffect(() => {\n    if (profile_id === undefined) {\n      return;\n    }\n\n    console.log(profile_id);\n    getUser(profile_id).then(profile => {\n      profile['graded'] = undefined;\n      profile['completedQuiz'] = undefined;\n      profile['communications'] = undefined;\n      profile['id'] = undefined;\n\n      if (showStats) {\n        changeCurrentProfile(profile);\n      } else {\n        profile['grade'] = undefined;\n        changeCurrentProfile(profile);\n      }\n\n      changeProfileString(profile.firstName + \" \" + profile.lastName);\n      window.analytics.page(profileString);\n    }).catch(error => {\n      console.error(error);\n      Router.push('/');\n    });\n  }, [profile_id]);\n\n  const downloadResume = () => {\n    storage_ref.child('resumes/' + currentProfile.resume).getDownloadURL().then(url => {\n      console.log(url);\n      window.open(url, '_blank');\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  const connectWithPerson = async () => {\n    if (showStats) {\n      window.analytics.track(currentUser.companyName + ' connects to designer');\n      const comm = await createCommunication(profile_id, currentUser.id);\n      const newUser = { ...currentUser,\n        communications: [...currentUser.communications, comm.id]\n      };\n      changeUser(newUser);\n      Router.push('/dashboard_employer');\n    } else if (currentUser.firstName !== undefined) {\n      // Logged in as user\n      message.info('Only Employers can connect with available designers');\n    } else {\n      // Not logged in or anonymous user\n      Router.push('/signup');\n    }\n  };\n\n  if (currentProfile === undefined || currentProfile === null) {\n    return /*#__PURE__*/React.createElement(Loading, null);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Head, null, /*#__PURE__*/React.createElement(\"title\", null, profileString)), /*#__PURE__*/React.createElement(SimpleNavigationBar, {\n    subtitle: profileString\n  }, /*#__PURE__*/React.createElement(UpperFullContainer, null, /*#__PURE__*/React.createElement(TextContainer, null, /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Desired Salary',\n    below: currentProfile.salary\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Preferred Role',\n    below: currentProfile.preferredRole\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Quiz',\n    below: currentProfile.designType\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Portfolio',\n    link: currentProfile.portfolio,\n    below: 'Website'\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Resume',\n    onClick: downloadResume,\n    below: 'Download'\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Visa Status',\n    below: currentProfile.visa\n  })), /*#__PURE__*/React.createElement(BigBlackButton, {\n    style: {\n      height: 50\n    },\n    onClick: connectWithPerson\n  }, \"Contact\")), /*#__PURE__*/React.createElement(Background, {\n    style: {\n      height: '100%'\n    }\n  }, /*#__PURE__*/React.createElement(Typography.Text, null, \"hello\"))));\n};\n\nexport default Profile;","map":{"version":3,"sources":["/Users/insanity/Documents/personalprojects/sumpixel/client/pages/profile/[profile_id].tsx"],"names":["React","useEffect","useState","useContext","Router","useRouter","SimpleNavigationBar","Head","Loading","getUser","createCommunication","Background","Typography","message","UserContext","TextAboveAnswer","styled","storage_ref","BigBlackButton","TextContainer","div","UpperFullContainer","Profile","currentUser","changeUser","router","profile_id","query","currentProfile","changeCurrentProfile","undefined","profileString","changeProfileString","showStats","companyName","console","log","then","profile","firstName","lastName","window","analytics","page","catch","error","push","downloadResume","child","resume","getDownloadURL","url","open","connectWithPerson","track","comm","id","newUser","communications","info","salary","preferredRole","designType","portfolio","visa","height"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useContext} from 'react'\nimport Router, { useRouter } from 'next/router'\nimport SimpleNavigationBar from '../../components/Profile/SimpleNavigationBar'\nimport Head from 'next/head'\nimport {User, Employer} from '../../model/model'\nimport Loading from '../../components/General/Loading'\nimport {getUser, createCommunication} from '../../lib/server'\nimport {Background} from '../dashboard_employer'\nimport {Typography, message} from 'antd'\nimport {UserContext} from '../../lib/UserProvider'\nimport TextAboveAnswer from '../../components/Profile/TextAboveAnswer'\nimport styled from 'styled-components'\nimport {storage_ref} from '../../lib/firebase'\nimport {BigBlackButton} from '../../components/General/BigBlackButton'\nimport _ from 'lodash'\n\nconst TextContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 75%;\n    justify-content: space-between;\n    padding-top: 15px;\n    padding-bottom: 40px;\n`\n\nconst UpperFullContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n    padding-right: 40px;\n`\n\nconst Profile: React.FC = () => {\n    const {currentUser, changeUser}  = useContext(UserContext)\n    const router = useRouter()\n    const { profile_id } = router.query\n    const [currentProfile, changeCurrentProfile]  = useState<User>(undefined)\n    const [profileString, changeProfileString] = useState<string>('Profile')\n    const showStats = currentUser !== null && ((currentUser as Employer).companyName !== undefined)\n\n\n    useEffect(() => {\n        if (profile_id === undefined) {\n            return\n        }\n\n        console.log(profile_id)\n        getUser(profile_id as string).then((profile: User) => {\n            profile['graded'] = undefined\n            profile['completedQuiz'] = undefined\n            profile['communications'] = undefined\n            profile['id'] = undefined\n            if (showStats) {\n                changeCurrentProfile(profile)\n            } else {\n                profile['grade'] = undefined\n                changeCurrentProfile(profile)\n            }\n            changeProfileString(profile.firstName + \" \" + profile.lastName)\n            window.analytics.page(profileString)\n        }).catch((error) => {\n            console.error(error)\n            Router.push('/')\n        })\n    }, [profile_id])\n\n    const downloadResume = () => {\n        storage_ref.child('resumes/' + currentProfile.resume).getDownloadURL().then(url => {\n            console.log(url)\n            window.open(url, '_blank')\n        }).catch((error) => {\n            console.error(error)\n        })\n    }\n\n    const connectWithPerson = async () => {\n        if (showStats) {\n            window.analytics.track((currentUser as Employer).companyName + ' connects to designer');\n            const comm = await createCommunication(profile_id as string, currentUser.id)\n            const newUser = {...currentUser, communications: [...currentUser.communications, comm.id]}\n            changeUser(newUser)\n            Router.push('/dashboard_employer')\n        } else if (currentUser.firstName !== undefined) {\n            // Logged in as user\n            message.info('Only Employers can connect with available designers')\n        } else {\n            // Not logged in or anonymous user\n            Router.push('/signup')\n        }\n    }\n\n    if (currentProfile === undefined || currentProfile === null) {\n        return (<Loading />)\n    }\n\n    return (<>\n                <Head>\n                    <title>{profileString}</title>\n                </Head>\n                <SimpleNavigationBar \n                    subtitle={profileString}\n                >\n                    <UpperFullContainer>\n                        <TextContainer>\n                            <TextAboveAnswer above={'Desired Salary'} below={currentProfile.salary}/>\n                            <TextAboveAnswer above={'Preferred Role'} below={currentProfile.preferredRole}/>\n                            <TextAboveAnswer above={'Quiz'} below={currentProfile.designType}/>\n                            <TextAboveAnswer above={'Portfolio'} link={currentProfile.portfolio} below={'Website'}/>\n                            <TextAboveAnswer above={'Resume'} onClick={downloadResume} below={'Download'}/>\n                            <TextAboveAnswer above={'Visa Status'} below={currentProfile.visa}/>\n                        </TextContainer>\n                        <BigBlackButton style={{height: 50}} onClick={connectWithPerson}>\n                            Contact\n                        </BigBlackButton>\n                    </UpperFullContainer>\n                    <Background style={{height: '100%'}}>\n                        <Typography.Text>hello</Typography.Text>\n                    </Background>\n                </SimpleNavigationBar>\n            </>)\n}\n\nexport default Profile"]},"metadata":{},"sourceType":"module"}