{"ast":null,"code":"import React, { useEffect, useState, useContext } from 'react';\nimport { message } from 'antd';\nimport { PopupModal } from '../components/PopupModal';\nimport { myFirebase } from '../lib/firebase';\nimport { Onboard } from '../components/Onboard';\nimport { UserContext } from '../lib/UserProvider';\nimport LoginComponent from '../components/LoginComponent';\n\nconst SignUp = props => {\n  const {\n    currentUser\n  } = useContext(UserContext);\n  const [isSignedIn, setIsSignedIn] = useState(false);\n  useEffect(() => {\n    if (currentUser !== null) {\n      setIsSignedIn(true);\n    }\n  }, [currentUser]);\n\n  const onFinish = values => {\n    myFirebase.auth().createUserWithEmailAndPassword(values.email, values.password).then(() => {\n      myFirebase.auth().signInWithEmailAndPassword(values.email, values.password).then(() => {\n        myFirebase.auth().currentUser.updateProfile({\n          displayName: `${values.firstName} ${values.lastName}`\n        }).then(() => {\n          setIsSignedIn(true);\n        });\n      });\n    }).catch(error => {\n      message.error(error.message);\n    });\n  };\n\n  const deleteUser = async () => {\n    if (myFirebase.auth().currentUser == null) {\n      await myFirebase.auth().signOut();\n    } else {\n      await myFirebase.auth().currentUser.delete();\n    }\n\n    setIsSignedIn(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PopupModal, {\n    visible: !isSignedIn\n  }, /*#__PURE__*/React.createElement(LoginComponent, {\n    isSignUp: true,\n    title: \"Sign Up\",\n    onFinish: onFinish\n  })), /*#__PURE__*/React.createElement(Onboard, {\n    deleteUser: deleteUser\n  }));\n};\n\nexport default SignUp;","map":{"version":3,"sources":["/Users/insanity/Documents/personalprojects/sumpixel-client/pages/signup.tsx"],"names":["React","useEffect","useState","useContext","message","PopupModal","myFirebase","Onboard","UserContext","LoginComponent","SignUp","props","currentUser","isSignedIn","setIsSignedIn","onFinish","values","auth","createUserWithEmailAndPassword","email","password","then","signInWithEmailAndPassword","updateProfile","displayName","firstName","lastName","catch","error","deleteUser","signOut","delete"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,EAAoCC,UAApC,QAAqD,OAArD;AACA,SAAQC,OAAR,QAAsB,MAAtB;AACA,SAAQC,UAAR,QAAyB,0BAAzB;AACA,SAAQC,UAAR,QAAyB,iBAAzB;AACA,SAAQC,OAAR,QAAsB,uBAAtB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,OAAOC,cAAP,MAA2B,8BAA3B;;AAEA,MAAMC,MAAgB,GAAIC,KAAD,IAAW;AAChC,QAAM;AAACC,IAAAA;AAAD,MAAgBT,UAAU,CAACK,WAAD,CAAhC;AACA,QAAM,CAACK,UAAD,EAAaC,aAAb,IAA8BZ,QAAQ,CAAC,KAAD,CAA5C;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIW,WAAW,KAAK,IAApB,EAA0B;AACtBE,MAAAA,aAAa,CAAC,IAAD,CAAb;AACH;AACJ,GAJQ,EAIN,CAACF,WAAD,CAJM,CAAT;;AAMA,QAAMG,QAAQ,GAAIC,MAAD,IAAY;AACzBV,IAAAA,UAAU,CAACW,IAAX,GAAkBC,8BAAlB,CAAiDF,MAAM,CAACG,KAAxD,EAA+DH,MAAM,CAACI,QAAtE,EAAgFC,IAAhF,CAAqF,MAAM;AACvFf,MAAAA,UAAU,CAACW,IAAX,GAAkBK,0BAAlB,CAA6CN,MAAM,CAACG,KAApD,EAA2DH,MAAM,CAACI,QAAlE,EAA4EC,IAA5E,CAAiF,MAAM;AACnFf,QAAAA,UAAU,CAACW,IAAX,GAAkBL,WAAlB,CAA8BW,aAA9B,CAA4C;AACxCC,UAAAA,WAAW,EAAG,GAAER,MAAM,CAACS,SAAU,IAAGT,MAAM,CAACU,QAAS;AADZ,SAA5C,EAEGL,IAFH,CAEQ,MAAM;AACVP,UAAAA,aAAa,CAAC,IAAD,CAAb;AACH,SAJD;AAKH,OAND;AAOH,KARD,EAQGa,KARH,CAQUC,KAAD,IAAW;AAChBxB,MAAAA,OAAO,CAACwB,KAAR,CAAcA,KAAK,CAACxB,OAApB;AACH,KAVD;AAWH,GAZD;;AAcA,QAAMyB,UAAU,GAAG,YAAY;AAC3B,QAAIvB,UAAU,CAACW,IAAX,GAAkBL,WAAlB,IAAiC,IAArC,EAA2C;AACvC,YAAMN,UAAU,CAACW,IAAX,GAAkBa,OAAlB,EAAN;AACH,KAFD,MAEO;AACH,YAAMxB,UAAU,CAACW,IAAX,GAAkBL,WAAlB,CAA8BmB,MAA9B,EAAN;AACH;;AACDjB,IAAAA,aAAa,CAAC,KAAD,CAAb;AACH,GAPD;;AASA,sBACI,uDACI,oBAAC,UAAD;AACI,IAAA,OAAO,EAAE,CAACD;AADd,kBAGI,oBAAC,cAAD;AAAgB,IAAA,QAAQ,EAAE,IAA1B;AAAgC,IAAA,KAAK,EAAC,SAAtC;AAAgD,IAAA,QAAQ,EAAEE;AAA1D,IAHJ,CADJ,eAMI,oBAAC,OAAD;AAAS,IAAA,UAAU,EAAEc;AAArB,IANJ,CADJ;AAUH,CA3CD;;AA6CA,eAAenB,MAAf","sourcesContent":["import React, {useEffect, useState, useContext} from 'react'\nimport {message} from 'antd'\nimport {PopupModal} from '../components/PopupModal';\nimport {myFirebase} from '../lib/firebase'\nimport {Onboard} from '../components/Onboard'\nimport { UserContext } from '../lib/UserProvider';\nimport LoginComponent from '../components/LoginComponent'\n\nconst SignUp: React.FC = (props) => {\n    const {currentUser} = useContext(UserContext)\n    const [isSignedIn, setIsSignedIn] = useState(false);\n    \n    useEffect(() => {\n        if (currentUser !== null) {\n            setIsSignedIn(true)\n        }\n    }, [currentUser])\n\n    const onFinish = (values) => {\n        myFirebase.auth().createUserWithEmailAndPassword(values.email, values.password).then(() => {\n            myFirebase.auth().signInWithEmailAndPassword(values.email, values.password).then(() => {\n                myFirebase.auth().currentUser.updateProfile({\n                    displayName: `${values.firstName} ${values.lastName}`\n                }).then(() => {\n                    setIsSignedIn(true)\n                })\n            })\n        }).catch((error) => {\n            message.error(error.message)\n        })\n    }\n\n    const deleteUser = async () => {\n        if (myFirebase.auth().currentUser == null) {\n            await myFirebase.auth().signOut()\n        } else {\n            await myFirebase.auth().currentUser.delete()\n        }\n        setIsSignedIn(false)\n    }\n\n    return (\n        <>\n            <PopupModal\n                visible={!isSignedIn}\n            >\n                <LoginComponent isSignUp={true} title=\"Sign Up\" onFinish={onFinish}/>\n            </PopupModal>\n            <Onboard deleteUser={deleteUser}/>\n        </>\n    );\n};\n\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}