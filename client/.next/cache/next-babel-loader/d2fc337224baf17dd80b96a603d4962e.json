{"ast":null,"code":"import React, { useContext, useState, useEffect } from 'react';\nimport { UserContext } from '../../../lib/UserProvider';\nimport QuizScreen from '../../OnboardingFlow/Designers/QuizScreen';\nimport { getDesignCommunicationsList, updateDesignerDecision, createUser } from '../../../lib/server';\nimport { Typography, message } from 'antd';\nimport Loading from '../../General/Loading';\nimport CommunicationsList from './CommunicationsList';\nimport styled from 'styled-components';\nconst Message = styled(Typography).withConfig({\n  displayName: \"ViewCommunications__Message\",\n  componentId: \"sc-19xm5kw-0\"\n})([\"padding-bottom:30px;\"]);\n\nconst ViewCommunications = props => {\n  const {\n    currentUser,\n    changeUser\n  } = useContext(UserContext);\n  const [commList, setCommList] = useState(undefined);\n\n  const updateUser = async updatedUser => {\n    changeUser(updatedUser);\n    await createUser(updatedUser);\n  };\n\n  const updateDesignerText = async (commId, update) => {\n    window.analytics.track(currentUser.firstName + \" \" + currentUser.lastName + ' updated decision on company - ' + update);\n    await updateDesignerDecision(commId, update);\n    message.success(\"Updated Decision\");\n    setCommList((await getDesignCommunicationsList(currentUser.id)));\n  };\n\n  useEffect(() => {\n    getDesignCommunicationsList(currentUser.id).then(commList => {\n      setCommList(commList);\n    });\n  }, []);\n\n  if (!currentUser.completedQuiz) {\n    return /*#__PURE__*/React.createElement(QuizScreen, {\n      changeCurrentUser: updateUser\n    });\n  }\n\n  if (!currentUser.graded) {\n    return /*#__PURE__*/React.createElement(Message, null, \"It looks you have not been reviewed by our staff yet. Check back later!\");\n  } else {\n    if (currentUser.communications === null || currentUser.communications === []) {\n      return /*#__PURE__*/React.createElement(Message, null, \"Our employers are currently taking a look at your profile and will reach out if they express interest in you.\");\n    } else {\n      if (commList === undefined) {\n        return /*#__PURE__*/React.createElement(Loading, null);\n      } else {\n        if (currentUser.grade.score === 0) {\n          return /*#__PURE__*/React.createElement(Message, null, \"I'm sorry. We have chosen not to continue with your application. Please contact us if you have any questions about this decision.\");\n        }\n\n        return /*#__PURE__*/React.createElement(CommunicationsList, {\n          communicationList: commList,\n          updateDesignerText: updateDesignerText\n        });\n      }\n    }\n  }\n};\n\nexport default ViewCommunications;","map":{"version":3,"sources":["/Users/insanity/Documents/Sumpixel/sumpixel/client/components/Dashboard/Designer/ViewCommunications.tsx"],"names":["React","useContext","useState","useEffect","UserContext","QuizScreen","getDesignCommunicationsList","updateDesignerDecision","createUser","Typography","message","Loading","CommunicationsList","styled","Message","ViewCommunications","props","currentUser","changeUser","commList","setCommList","undefined","updateUser","updatedUser","updateDesignerText","commId","update","window","analytics","track","firstName","lastName","success","id","then","completedQuiz","graded","communications","grade","score"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,QAA3B,EAAqCC,SAArC,QAAqD,OAArD;AACA,SAAQC,WAAR,QAA0B,2BAA1B;AACA,OAAOC,UAAP,MAAuB,2CAAvB;AACA,SAAQC,2BAAR,EAAqCC,sBAArC,EAA6DC,UAA7D,QAA8E,qBAA9E;AAEA,SAAQC,UAAR,EAAoBC,OAApB,QAAkC,MAAlC;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,kBAAP,MAA+B,sBAA/B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,MAAMC,OAAO,GAAGD,MAAM,CAACJ,UAAD,CAAT;AAAA;AAAA;AAAA,4BAAb;;AAIA,MAAMM,kBAA4B,GAAIC,KAAD,IAAW;AAC5C,QAAM;AAACC,IAAAA,WAAD;AAAcC,IAAAA;AAAd,MAA6BjB,UAAU,CAACG,WAAD,CAA7C;AACA,QAAM,CAACe,QAAD,EAAWC,WAAX,IAA0BlB,QAAQ,CAAgCmB,SAAhC,CAAxC;;AAEA,QAAMC,UAAU,GAAG,MAAOC,WAAP,IAA6B;AAC5CL,IAAAA,UAAU,CAACK,WAAD,CAAV;AACA,UAAMf,UAAU,CAACe,WAAD,CAAhB;AACH,GAHD;;AAKA,QAAMC,kBAAkB,GAAG,OAAOC,MAAP,EAAuBC,MAAvB,KAAwD;AAC/EC,IAAAA,MAAM,CAACC,SAAP,CAAiBC,KAAjB,CAAwBZ,WAAD,CAAsBa,SAAtB,GAAkC,GAAlC,GAAyCb,WAAD,CAAsBc,QAA9D,GAA0E,iCAA1E,GAA8GL,MAArI;AACA,UAAMnB,sBAAsB,CAACkB,MAAD,EAASC,MAAT,CAA5B;AACAhB,IAAAA,OAAO,CAACsB,OAAR,CAAgB,kBAAhB;AACAZ,IAAAA,WAAW,EAAC,MAAMd,2BAA2B,CAACW,WAAW,CAACgB,EAAb,CAAlC,EAAX;AACH,GALD;;AAOA9B,EAAAA,SAAS,CAAC,MAAM;AACZG,IAAAA,2BAA2B,CAACW,WAAW,CAACgB,EAAb,CAA3B,CAA4CC,IAA5C,CAAkDf,QAAD,IAAiC;AAC9EC,MAAAA,WAAW,CAACD,QAAD,CAAX;AACH,KAFD;AAGH,GAJQ,EAIN,EAJM,CAAT;;AAMA,MAAI,CAAGF,WAAD,CAAsBkB,aAA5B,EAA4C;AACxC,wBAAQ,oBAAC,UAAD;AAAY,MAAA,iBAAiB,EAAEb;AAA/B,MAAR;AACH;;AAED,MAAI,CAAEL,WAAD,CAAsBmB,MAA3B,EAAmC;AAC/B,wBAAQ,oBAAC,OAAD,kFAAR;AACH,GAFD,MAEO;AACH,QAAKnB,WAAD,CAAsBoB,cAAtB,KAAyC,IAAzC,IAAkDpB,WAAD,CAAsBoB,cAAtB,KAAyC,EAA9F,EAAkG;AAC9F,0BAAQ,oBAAC,OAAD,wHAAR;AACH,KAFD,MAEO;AACH,UAAIlB,QAAQ,KAAKE,SAAjB,EAA4B;AACxB,4BAAQ,oBAAC,OAAD,OAAR;AACH,OAFD,MAEO;AACH,YAAKJ,WAAD,CAAsBqB,KAAtB,CAA4BC,KAA5B,KAAsC,CAA1C,EAA6C;AACzC,8BAAQ,oBAAC,OAAD,4IAAR;AACH;;AAED,4BAAQ,oBAAC,kBAAD;AAAoB,UAAA,iBAAiB,EAAEpB,QAAvC;AAAiD,UAAA,kBAAkB,EAAEK;AAArE,UAAR;AACH;AACJ;AACJ;AACJ,CA3CD;;AA6CA,eAAeT,kBAAf","sourcesContent":["import React, {useContext, useState, useEffect} from 'react'\nimport {UserContext} from '../../../lib/UserProvider'\nimport QuizScreen from '../../OnboardingFlow/Designers/QuizScreen'\nimport {getDesignCommunicationsList, updateDesignerDecision, createUser} from '../../../lib/server'\nimport {User, CommForDesigner, DesignerDecisionTalk} from '../../../model/model'\nimport {Typography, message} from 'antd'\nimport Loading from '../../General/Loading'\nimport CommunicationsList from './CommunicationsList'\nimport styled from 'styled-components'\n\nconst Message = styled(Typography)`\n    padding-bottom: 30px;\n`\n\nconst ViewCommunications: React.FC = (props) => {\n    const {currentUser, changeUser}  = useContext(UserContext)\n    const [commList, setCommList] = useState<CommForDesigner[] | undefined>(undefined)\n\n    const updateUser = async (updatedUser: User) => {\n        changeUser(updatedUser)\n        await createUser(updatedUser)\n    }\n\n    const updateDesignerText = async (commId: string, update: DesignerDecisionTalk) => {\n        window.analytics.track((currentUser as User).firstName + \" \" + (currentUser as User).lastName  + ' updated decision on company - ' + update);\n        await updateDesignerDecision(commId, update)\n        message.success(\"Updated Decision\")\n        setCommList(await getDesignCommunicationsList(currentUser.id))\n    }\n\n    useEffect(() => {\n        getDesignCommunicationsList(currentUser.id).then((commList: CommForDesigner[]) => {\n            setCommList(commList)\n        })\n    }, [])\n\n    if (!((currentUser as User).completedQuiz)) {\n        return (<QuizScreen changeCurrentUser={updateUser}/>)\n    }\n\n    if (!(currentUser as User).graded) {\n        return (<Message>It looks you have not been reviewed by our staff yet. Check back later!</Message>)\n    } else {\n        if ((currentUser as User).communications === null || (currentUser as User).communications === []) {\n            return (<Message>Our employers are currently taking a look at your profile and will reach out if they express interest in you.</Message>)\n        } else {\n            if (commList === undefined) {\n                return (<Loading />)\n            } else {\n                if ((currentUser as User).grade.score === 0) {\n                    return (<Message>I'm sorry. We have chosen not to continue with your application. Please contact us if you have any questions about this decision.</Message>)\n                }\n\n                return (<CommunicationsList communicationList={commList} updateDesignerText={updateDesignerText}/>)\n            }\n        }\n    }\n}\n\nexport default ViewCommunications"]},"metadata":{},"sourceType":"module"}