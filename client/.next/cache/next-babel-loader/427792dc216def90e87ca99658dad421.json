{"ast":null,"code":"import React, { useEffect, useState } from 'react';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport { Button } from 'antd';\nimport { myFirebase } from '../lib/firebase';\nimport { getUser, getEmployer } from '../lib/server';\nimport Router from 'next/router';\nimport * as firebase from 'firebase/app';\nconst AuthConfig = {\n  callbacks: {\n    signInSuccessWithAuthResult: () => true\n  },\n  signInOptions: [firebase.auth.EmailAuthProvider.PROVIDER_ID]\n};\n\nconst Index = () => {\n  const [userEmployer, setUserEmployer] = useState(undefined);\n  useEffect(() => {\n    myFirebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        setUserEmployer({\n          email: user.email,\n          id: user.uid,\n          firstName: user.displayName.substr(0, user.displayName.indexOf(' ')),\n          lastName: user.displayName.substr(user.displayName.indexOf(' ') + 1)\n        });\n      }\n    });\n  });\n  useEffect(() => {\n    async function findUser() {\n      if (userEmployer === undefined) return;\n      const user = await getUser(myFirebase.auth().currentUser.uid);\n      const employer = await getEmployer(myFirebase.auth().currentUser.uid);\n\n      if (user['user_exists'] == undefined) {\n        Router.replace('/dashboard_user');\n      } else if (employer['employer_exists'] == undefined) {\n        Router.replace('/dashboard_employer');\n      }\n    }\n\n    findUser();\n  }, [userEmployer]);\n\n  const onClick = () => {\n    Router.replace('/signup');\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      paddingTop: '15%',\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center'\n    }\n  }, /*#__PURE__*/React.createElement(StyledFirebaseAuth, {\n    uiConfig: AuthConfig,\n    firebaseAuth: myFirebase.auth()\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: onClick,\n    style: {\n      paddingTop: 10\n    },\n    type: \"link\"\n  }, \"Haven't made an account? Click here to sign up\"));\n};\n\nexport default Index;","map":{"version":3,"sources":["/Users/insanity/Documents/personalprojects/sumpixel-client/pages/index.tsx"],"names":["React","useEffect","useState","StyledFirebaseAuth","Button","myFirebase","getUser","getEmployer","Router","firebase","AuthConfig","callbacks","signInSuccessWithAuthResult","signInOptions","auth","EmailAuthProvider","PROVIDER_ID","Index","userEmployer","setUserEmployer","undefined","onAuthStateChanged","user","email","id","uid","firstName","displayName","substr","indexOf","lastName","findUser","currentUser","employer","replace","onClick","paddingTop","display","flexDirection","justifyContent"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,kBAAP,MAA+B,qCAA/B;AACA,SAAQC,MAAR,QAAqB,MAArB;AACA,SAAQC,UAAR,QAAyB,iBAAzB;AAEA,SAAQC,OAAR,EAAiBC,WAAjB,QAAmC,eAAnC;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAO,KAAKC,QAAZ,MAA0B,cAA1B;AAEA,MAAMC,UAAU,GAAG;AACfC,EAAAA,SAAS,EAAE;AACPC,IAAAA,2BAA2B,EAAE,MAAM;AAD5B,GADI;AAIfC,EAAAA,aAAa,EAAE,CACXJ,QAAQ,CAACK,IAAT,CAAcC,iBAAd,CAAgCC,WADrB;AAJA,CAAnB;;AASA,MAAMC,KAAe,GAAG,MAAM;AAC1B,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCjB,QAAQ,CAA8BkB,SAA9B,CAAhD;AACAnB,EAAAA,SAAS,CAAC,MAAM;AACZI,IAAAA,UAAU,CAACS,IAAX,GAAkBO,kBAAlB,CAAqCC,IAAI,IAAI;AACzC,UAAIA,IAAJ,EAAU;AACNH,QAAAA,eAAe,CAAC;AACZI,UAAAA,KAAK,EAAED,IAAI,CAACC,KADA;AAEZC,UAAAA,EAAE,EAAEF,IAAI,CAACG,GAFG;AAGZC,UAAAA,SAAS,EAAEJ,IAAI,CAACK,WAAL,CAAiBC,MAAjB,CAAwB,CAAxB,EAA2BN,IAAI,CAACK,WAAL,CAAiBE,OAAjB,CAAyB,GAAzB,CAA3B,CAHC;AAIZC,UAAAA,QAAQ,EAAER,IAAI,CAACK,WAAL,CAAiBC,MAAjB,CAAwBN,IAAI,CAACK,WAAL,CAAiBE,OAAjB,CAAyB,GAAzB,IAA8B,CAAtD;AAJE,SAAD,CAAf;AAMH;AACJ,KATD;AAUH,GAXQ,CAAT;AAaA5B,EAAAA,SAAS,CAAC,MAAM;AACZ,mBAAe8B,QAAf,GAA0B;AACtB,UAAIb,YAAY,KAAKE,SAArB,EAAgC;AAEhC,YAAME,IAAI,GAAG,MAAMhB,OAAO,CAACD,UAAU,CAACS,IAAX,GAAkBkB,WAAlB,CAA8BP,GAA/B,CAA1B;AACA,YAAMQ,QAAQ,GAAG,MAAM1B,WAAW,CAACF,UAAU,CAACS,IAAX,GAAkBkB,WAAlB,CAA8BP,GAA/B,CAAlC;;AAEA,UAAIH,IAAI,CAAC,aAAD,CAAJ,IAAuBF,SAA3B,EAAsC;AAClCZ,QAAAA,MAAM,CAAC0B,OAAP,CAAe,iBAAf;AACH,OAFD,MAEO,IAAID,QAAQ,CAAC,iBAAD,CAAR,IAA+Bb,SAAnC,EAA8C;AACjDZ,QAAAA,MAAM,CAAC0B,OAAP,CAAe,qBAAf;AACH;AACJ;;AACDH,IAAAA,QAAQ;AACX,GAdQ,EAcN,CAACb,YAAD,CAdM,CAAT;;AAgBA,QAAMiB,OAAO,GAAG,MAAM;AAClB3B,IAAAA,MAAM,CAAC0B,OAAP,CAAe,SAAf;AACH,GAFD;;AAIA,sBACI;AAAK,IAAA,KAAK,EAAE;AAACE,MAAAA,UAAU,EAAE,KAAb;AAAoBC,MAAAA,OAAO,EAAE,MAA7B;AAAqCC,MAAAA,aAAa,EAAE,QAApD;AAA8DC,MAAAA,cAAc,EAAE;AAA9E;AAAZ,kBACI,oBAAC,kBAAD;AACI,IAAA,QAAQ,EAAE7B,UADd;AAEI,IAAA,YAAY,EAAEL,UAAU,CAACS,IAAX;AAFlB,IADJ,eAII,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEqB,OAAjB;AAA0B,IAAA,KAAK,EAAE;AAACC,MAAAA,UAAU,EAAE;AAAb,KAAjC;AAAmD,IAAA,IAAI,EAAC;AAAxD,sDAJJ,CADJ;AAUH,CA7CD;;AA+CA,eAAenB,KAAf","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport {Button} from 'antd'\nimport {myFirebase} from '../lib/firebase'\nimport {User, Employer} from '../model/model'\nimport {getUser, getEmployer} from '../lib/server'\nimport Router from 'next/router'\nimport * as firebase from 'firebase/app'\n\nconst AuthConfig = {\n    callbacks: {\n        signInSuccessWithAuthResult: () => true\n    },\n    signInOptions: [\n        firebase.auth.EmailAuthProvider.PROVIDER_ID\n    ]\n};\n\nconst Index: React.FC = () => {\n    const [userEmployer, setUserEmployer] = useState<User | Employer | undefined>(undefined);\n    useEffect(() => {\n        myFirebase.auth().onAuthStateChanged(user => {\n            if (user) {\n                setUserEmployer({\n                    email: user.email,\n                    id: user.uid,\n                    firstName: user.displayName.substr(0, user.displayName.indexOf(' ')),\n                    lastName: user.displayName.substr(user.displayName.indexOf(' ')+1),\n                });\n            }\n        });\n    });\n\n    useEffect(() => {\n        async function findUser() {\n            if (userEmployer === undefined) return\n\n            const user = await getUser(myFirebase.auth().currentUser.uid)\n            const employer = await getEmployer(myFirebase.auth().currentUser.uid)\n\n            if (user['user_exists'] == undefined) {\n                Router.replace('/dashboard_user')\n            } else if (employer['employer_exists'] == undefined) {\n                Router.replace('/dashboard_employer')\n            }\n        }\n        findUser()\n    }, [userEmployer])\n\n    const onClick = () => {\n        Router.replace('/signup')\n    }\n\n    return (\n        <div style={{paddingTop: '15%', display: 'flex', flexDirection: 'column', justifyContent: 'center'}}>\n            <StyledFirebaseAuth\n                uiConfig={AuthConfig}\n                firebaseAuth={myFirebase.auth()}/>\n            <Button onClick={onClick} style={{paddingTop: 10}} type=\"link\">\n                Haven't made an account? Click here to sign up\n            </Button>\n        </div>\n    );\n};\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}