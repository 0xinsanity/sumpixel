{"ast":null,"code":"import React, { useEffect, useState, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport SimpleNavigationBar from '../../components/Profile/SimpleNavigationBar';\nimport Head from 'next/head';\nimport { getUser, createCommunication, getQAById, getDesignerFromCommunication } from '../../lib/server';\nimport { Background } from '../dashboard_employer';\nimport { Typography, message, Col, Row } from 'antd';\nimport { UserContext } from '../../lib/UserProvider';\nimport TextAboveAnswer from '../../components/Profile/TextAboveAnswer';\nimport Socials from '../../components/Profile/Socials';\nimport styled from 'styled-components';\nimport { storage_ref } from '../../lib/firebase';\nimport { BigBlackButton } from '../../components/General/BigBlackButton';\nimport _ from 'lodash';\nimport OpenPage from '../../components/General/OpenPage';\nconst TextContainer = styled.div.withConfig({\n  displayName: \"profile_id__TextContainer\",\n  componentId: \"sc-1cojqhm-0\"\n})([\"display:flex;flex-direction:row;width:75%;justify-content:space-between;padding-top:15px;padding-bottom:40px;\"]);\nconst UpperFullContainer = styled.div.withConfig({\n  displayName: \"profile_id__UpperFullContainer\",\n  componentId: \"sc-1cojqhm-1\"\n})([\"display:flex;flex-direction:row;width:100%;justify-content:space-between;align-items:center;padding-right:40px;\"]);\nconst HeaderTitle = styled(Typography.Title).withConfig({\n  displayName: \"profile_id__HeaderTitle\",\n  componentId: \"sc-1cojqhm-2\"\n})([\"font-family:'Mark Pro Bold';padding-bottom:20px;\"]);\nconst Section = styled.div.withConfig({\n  displayName: \"profile_id__Section\",\n  componentId: \"sc-1cojqhm-3\"\n})([\"padding-bottom:52px;\"]);\n\nconst Profile = () => {\n  const {\n    currentUser,\n    changeUser,\n    setLoading\n  } = useContext(UserContext);\n  const router = useRouter();\n  const {\n    profile_id\n  } = router.query;\n  const [id, changeId] = useState(undefined);\n  const [currentProfile, changeCurrentProfile] = useState(undefined);\n  const [profileString, changeProfileString] = useState('Profile');\n  const [qAndA, changeQandA] = useState(null);\n  let showStats = currentUser !== null && currentUser.companyName !== undefined;\n  useEffect(() => {\n    if (profile_id !== undefined) {\n      console.log('id' + profile_id);\n      changeId(profile_id);\n    }\n  }, [profile_id]);\n  useEffect(() => {\n    if (id === undefined) return;\n    setLoading(true);\n    console.log('here1');\n    getUser(id).then(profile => {\n      console.log('here');\n      getQAById(id).then(qAndA => {\n        changeQandA(qAndA);\n      });\n      showStats = showStats && profile['graded'];\n\n      if (showStats) {\n        changeCurrentProfile(profile);\n      } else {\n        changeCurrentProfile(profile);\n      }\n\n      changeProfileString(profile.firstName + \" \" + profile.lastName);\n      setLoading(false);\n      window.analytics.page(profileString);\n    }).catch(error => {\n      console.error('ERROR IS HERE' + error);\n      setLoading(false); //OpenPage(setLoading, '/')\n    });\n  }, [id]);\n\n  const downloadResume = () => {\n    storage_ref.child('resumes/' + currentProfile.resume).getDownloadURL().then(url => {\n      console.log(url);\n      window.open(url, '_blank');\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  const connectWithPerson = async () => {\n    if (showStats) {\n      // TODO: Block employer from pressing connect with designer more than once\n      const communications = await Promise.all(_.map(currentUser.communications, async commId => await getDesignerFromCommunication(commId)));\n\n      if (_.findIndex(communications, comm => comm.id === profile_id) !== -1) {\n        message.info('You have already opened communications with ' + profileString);\n        return;\n      }\n\n      window.analytics.track(currentUser.companyName + ' connects to designer');\n      const comm = await createCommunication(profile_id, currentUser.id);\n      const newUser = { ...currentUser,\n        communications: [...currentUser.communications, comm.id]\n      };\n      changeUser(newUser);\n      OpenPage(setLoading, '/dashboard_employer');\n    } else if (currentUser === null || currentUser.isAnonymous) {\n      // Not logged in\n      OpenPage(setLoading, '/signup');\n    } else {\n      // Designer logged in\n      message.info('Only Employers can connect with available Designers');\n    }\n  };\n\n  if (currentProfile === undefined || currentProfile === null) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Head, null, /*#__PURE__*/React.createElement(\"title\", null, profileString)), /*#__PURE__*/React.createElement(SimpleNavigationBar, {\n    subtitle: profileString\n  }, /*#__PURE__*/React.createElement(UpperFullContainer, null, /*#__PURE__*/React.createElement(TextContainer, null, /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Desired Salary',\n    below: currentProfile.salary\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Preferred Role',\n    below: currentProfile.preferredRole\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Quiz',\n    below: currentProfile.designType\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Portfolio',\n    link: currentProfile.portfolio,\n    below: 'Website'\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Resume',\n    onClick: downloadResume,\n    below: 'Download'\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Visa Status',\n    below: currentProfile.visa\n  }), /*#__PURE__*/React.createElement(Socials, {\n    linkedin: currentProfile.linkedin,\n    dribbble: currentProfile.dribbble\n  })), /*#__PURE__*/React.createElement(BigBlackButton, {\n    style: {\n      height: 50\n    },\n    onClick: connectWithPerson\n  }, currentUser === null || currentUser.isAnonymous ? 'Sign Up To ' : null, \"Connect\")), /*#__PURE__*/React.createElement(Background, {\n    style: {\n      height: '100%',\n      padding: 64\n    }\n  }, /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Col, {\n    span: 24\n  }, currentProfile.completedQuiz ? /*#__PURE__*/React.createElement(React.Fragment, null, showStats ? /*#__PURE__*/React.createElement(Section, null, /*#__PURE__*/React.createElement(HeaderTitle, {\n    level: 3\n  }, \"Feedback\"), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    style: {\n      paddingBottom: 32\n    },\n    above: 'Score',\n    below: currentProfile.grade.score + '/10'\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    belowTextStyle: {\n      maxWidth: 'max-content'\n    },\n    above: 'Response',\n    below: currentProfile.grade.response\n  })) : null, /*#__PURE__*/React.createElement(Section, {\n    style: {\n      paddingBottom: 0\n    }\n  }, /*#__PURE__*/React.createElement(HeaderTitle, {\n    level: 3\n  }, \"Questions\"), _.map(qAndA, ({\n    question,\n    answer\n  }) => {\n    return /*#__PURE__*/React.createElement(TextAboveAnswer, {\n      style: {\n        paddingBottom: 32\n      },\n      belowTextStyle: {\n        maxWidth: 'max-content'\n      },\n      above: question,\n      below: answer\n    });\n  }))) : /*#__PURE__*/React.createElement(Section, {\n    style: {\n      paddingBottom: 0\n    }\n  }, /*#__PURE__*/React.createElement(HeaderTitle, {\n    style: {\n      paddingBottom: 0\n    },\n    level: 3\n  }, \"Quiz\"), /*#__PURE__*/React.createElement(Typography.Text, null, \"This user has not completed their quiz yet.\")))))));\n};\n\nexport default Profile;","map":{"version":3,"sources":["/Users/insanity/Documents/Sumpixel/sumpixel/client/pages/profile/[profile_id].tsx"],"names":["React","useEffect","useState","useContext","useRouter","SimpleNavigationBar","Head","getUser","createCommunication","getQAById","getDesignerFromCommunication","Background","Typography","message","Col","Row","UserContext","TextAboveAnswer","Socials","styled","storage_ref","BigBlackButton","_","OpenPage","TextContainer","div","UpperFullContainer","HeaderTitle","Title","Section","Profile","currentUser","changeUser","setLoading","router","profile_id","query","id","changeId","undefined","currentProfile","changeCurrentProfile","profileString","changeProfileString","qAndA","changeQandA","showStats","companyName","console","log","then","profile","firstName","lastName","window","analytics","page","catch","error","downloadResume","child","resume","getDownloadURL","url","open","connectWithPerson","communications","Promise","all","map","commId","findIndex","comm","info","track","newUser","isAnonymous","salary","preferredRole","designType","portfolio","visa","linkedin","dribbble","height","padding","completedQuiz","paddingBottom","grade","score","maxWidth","response","question","answer"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useContext} from 'react'\nimport Router, { useRouter } from 'next/router'\nimport SimpleNavigationBar from '../../components/Profile/SimpleNavigationBar'\nimport Head from 'next/head'\nimport {User, Employer, QA} from '../../model/model'\nimport Loading from '../../components/General/Loading'\nimport {getUser, createCommunication, getQAById, getDesignerFromCommunication} from '../../lib/server'\nimport {Background} from '../dashboard_employer'\nimport {Typography, message, Col, Row} from 'antd'\nimport {UserContext} from '../../lib/UserProvider'\nimport TextAboveAnswer from '../../components/Profile/TextAboveAnswer'\nimport Socials from '../../components/Profile/Socials'\nimport styled from 'styled-components'\nimport {storage_ref} from '../../lib/firebase'\nimport {Communication} from '../../model/model'\nimport {BigBlackButton} from '../../components/General/BigBlackButton'\nimport _ from 'lodash'\nimport OpenPage from '../../components/General/OpenPage'\n\nconst TextContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 75%;\n    justify-content: space-between;\n    padding-top: 15px;\n    padding-bottom: 40px;\n`\n\nconst UpperFullContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n    padding-right: 40px;\n`\n\nconst HeaderTitle = styled(Typography.Title)`\n    font-family: 'Mark Pro Bold';\n    padding-bottom: 20px;\n`\n\nconst Section = styled.div`\n    padding-bottom: 52px;\n`\n\nconst Profile: React.FC = () => {\n    const {currentUser, changeUser, setLoading}  = useContext(UserContext)\n    const router = useRouter()\n    const { profile_id } = router.query\n    const [id, changeId] = useState(undefined)\n    const [currentProfile, changeCurrentProfile]  = useState<User>(undefined)\n    const [profileString, changeProfileString] = useState<string>('Profile')\n    const [qAndA, changeQandA] = useState<QA[]>(null)\n    let showStats = currentUser !== null && ((currentUser as Employer).companyName !== undefined)\n\n    useEffect(() => {\n        if (profile_id !== undefined) {\n            console.log('id'+profile_id)\n            changeId(profile_id as string)\n        }\n    }, [profile_id])\n\n\n    useEffect(() => {\n        if (id === undefined) return\n        \n        setLoading(true)\n        console.log('here1')\n        getUser(id).then((profile: User) => {\n            console.log('here')\n            getQAById(id).then((qAndA: QA[]) => {\n                changeQandA(qAndA)\n            })\n            showStats = showStats && profile['graded']\n            if (showStats) {\n                changeCurrentProfile(profile)\n            } else {\n                changeCurrentProfile(profile)\n            }\n            changeProfileString(profile.firstName + \" \" + profile.lastName)\n            setLoading(false)\n            window.analytics.page(profileString)\n        }).catch((error) => {\n            console.error('ERROR IS HERE' + error)\n            setLoading(false)\n            //OpenPage(setLoading, '/')\n        })\n    }, [id])\n\n    const downloadResume = () => {\n        storage_ref.child('resumes/' + currentProfile.resume).getDownloadURL().then(url => {\n            console.log(url)\n            window.open(url, '_blank')\n        }).catch((error) => {\n            console.error(error)\n        })\n    }\n\n    const connectWithPerson = async () => {\n        if (showStats) {\n            // TODO: Block employer from pressing connect with designer more than once\n            const communications = await Promise.all(_.map(currentUser.communications, async (commId) => \n                await getDesignerFromCommunication(commId)\n            ))\n\n            if (_.findIndex(communications, (comm: User) => comm.id === profile_id) !== -1) {\n                message.info('You have already opened communications with ' + profileString)\n                return\n            }\n            window.analytics.track((currentUser as Employer).companyName + ' connects to designer');\n            const comm = await createCommunication(profile_id as string, currentUser.id)\n            const newUser = {...currentUser, communications: [...currentUser.communications, comm.id]}\n            changeUser(newUser)\n            OpenPage(setLoading, '/dashboard_employer')\n        } else if (currentUser === null || (currentUser as Employer).isAnonymous) {\n            // Not logged in\n            OpenPage(setLoading, '/signup')\n        } else {\n            // Designer logged in\n            message.info('Only Employers can connect with available Designers')\n        }\n    }\n\n    if (currentProfile === undefined || currentProfile === null) {\n        return (<></>)\n    }\n\n    return (<>\n                <Head>\n                    <title>{profileString}</title>\n                </Head>\n                <SimpleNavigationBar \n                    subtitle={profileString}\n                >\n                    <UpperFullContainer>\n                        <TextContainer>\n                            <TextAboveAnswer above={'Desired Salary'} below={currentProfile.salary}/>\n                            <TextAboveAnswer above={'Preferred Role'} below={currentProfile.preferredRole}/>\n                            <TextAboveAnswer above={'Quiz'} below={currentProfile.designType}/>\n                            <TextAboveAnswer above={'Portfolio'} link={currentProfile.portfolio} below={'Website'}/>\n                            <TextAboveAnswer above={'Resume'} onClick={downloadResume} below={'Download'}/>\n                            <TextAboveAnswer above={'Visa Status'} below={currentProfile.visa}/>\n                            <Socials linkedin={currentProfile.linkedin} dribbble={currentProfile.dribbble}/>\n                        </TextContainer>\n                        <BigBlackButton style={{height: 50}} onClick={connectWithPerson}>\n                           {currentUser === null || (currentUser as Employer).isAnonymous ? 'Sign Up To ' : null}Connect\n                        </BigBlackButton>\n                    </UpperFullContainer>\n                    <Background style={{height: '100%', padding: 64}}>\n                        <Row>\n                            <Col span={24}>\n                                {currentProfile.completedQuiz ? \n                                    <>\n                                        {showStats ? \n                                            <Section>\n                                                <HeaderTitle level={3}>Feedback</HeaderTitle>\n                                                <TextAboveAnswer style={{paddingBottom: 32}} above={'Score'} below={currentProfile.grade.score + '/10'}/>\n                                                <TextAboveAnswer belowTextStyle={{maxWidth: 'max-content'}} above={'Response'} below={currentProfile.grade.response}/>\n                                            </Section>\n                                        : null}\n                                        <Section style={{paddingBottom: 0}}>\n                                            <HeaderTitle level={3}>Questions</HeaderTitle>\n                                            {_.map(qAndA, ({question, answer}) => {\n                                                return (<TextAboveAnswer style={{paddingBottom: 32}} belowTextStyle={{maxWidth: 'max-content'}} above={question} below={answer}/>)\n                                            })}\n                                            \n                                        </Section>\n                                    </>\n                                :\n                                <Section style={{paddingBottom: 0}}>\n                                    <HeaderTitle style={{paddingBottom: 0}} level={3}>Quiz</HeaderTitle>\n                                    <Typography.Text>This user has not completed their quiz yet.</Typography.Text>\n                                </Section>\n                                }\n                                \n                            </Col>\n                        </Row>\n                    </Background>\n                </SimpleNavigationBar>\n            </>)\n}\n\nexport default Profile"]},"metadata":{},"sourceType":"module"}