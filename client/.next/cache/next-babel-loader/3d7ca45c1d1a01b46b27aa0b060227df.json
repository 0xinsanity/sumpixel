{"ast":null,"code":"import React, { useEffect, useContext } from 'react';\nimport { message } from 'antd';\nimport { myFirebase } from '../lib/firebase';\nimport { UserContext } from '../lib/UserProvider';\nimport Head from 'next/head';\nimport LoginComponent from '../components/Login/LoginComponent';\nimport { LoginBackground } from '../components/Login/LoginFlowContainer';\nimport OpenPage from '../components/General/OpenPage';\nimport firebase from 'firebase';\n\nconst SignUp = props => {\n  const {\n    currentUser,\n    setLoading\n  } = useContext(UserContext);\n  useEffect(() => {\n    myFirebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);\n\n    if (currentUser !== undefined && currentUser !== null) {\n      OpenPage(setLoading, '/onboarding');\n    }\n  }, [currentUser]);\n  useEffect(() => {\n    window.analytics.page('Signup');\n  }, []);\n\n  const onFinish = values => {\n    setLoading(true);\n    myFirebase.auth().createUserWithEmailAndPassword(values.email, values.password).then(() => {\n      const displayName = `${values.firstName} ${values.lastName}`;\n      myFirebase.auth().currentUser.updateProfile({\n        displayName: displayName\n      }).then(() => {\n        // Delays are necessary to ensure display name is updated correctly\n        setTimeout(() => {\n          window.analytics.track('Firebase Auth Signup');\n          OpenPage(setLoading, '/onboarding');\n        }, 1000);\n      });\n    }).catch(error => {\n      setLoading(false);\n      message.error(error.message);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Head, null, /*#__PURE__*/React.createElement(\"title\", null, \"Sign Up\")), /*#__PURE__*/React.createElement(LoginBackground, null, /*#__PURE__*/React.createElement(LoginComponent, {\n    isSignUp: true,\n    title: \"Sign Up\",\n    onFinish: onFinish\n  })));\n};\n\nexport default SignUp;","map":{"version":3,"sources":["/Users/insanity/Documents/Sumpixel/sumpixel/client/pages/signup.tsx"],"names":["React","useEffect","useContext","message","myFirebase","UserContext","Head","LoginComponent","LoginBackground","OpenPage","firebase","SignUp","props","currentUser","setLoading","auth","setPersistence","Auth","Persistence","LOCAL","undefined","window","analytics","page","onFinish","values","createUserWithEmailAndPassword","email","password","then","displayName","firstName","lastName","updateProfile","setTimeout","track","catch","error"],"mappings":"AAAA,OAAOA,KAAP,IAAeC,SAAf,EAAoCC,UAApC,QAAqD,OAArD;AACA,SAAQC,OAAR,QAAsB,MAAtB;AAEA,SAAQC,UAAR,QAAyB,iBAAzB;AAEA,SAASC,WAAT,QAA4B,qBAA5B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,cAAP,MAA2B,oCAA3B;AACA,SAASC,eAAT,QAAgC,wCAAhC;AACA,OAAOC,QAAP,MAAqB,gCAArB;AAEA,OAAOC,QAAP,MAAqB,UAArB;;AAEA,MAAMC,MAAgB,GAAIC,KAAD,IAAW;AAChC,QAAM;AAACC,IAAAA,WAAD;AAAcC,IAAAA;AAAd,MAA4BZ,UAAU,CAACG,WAAD,CAA5C;AACAJ,EAAAA,SAAS,CAAC,MAAM;AACZG,IAAAA,UAAU,CAACW,IAAX,GAAkBC,cAAlB,CAAiCN,QAAQ,CAACK,IAAT,CAAcE,IAAd,CAAmBC,WAAnB,CAA+BC,KAAhE;;AACA,QAAIN,WAAW,KAAKO,SAAhB,IAA6BP,WAAW,KAAK,IAAjD,EAAuD;AACnDJ,MAAAA,QAAQ,CAACK,UAAD,EAAa,aAAb,CAAR;AACH;AACJ,GALQ,EAKN,CAACD,WAAD,CALM,CAAT;AAOAZ,EAAAA,SAAS,CAAC,MAAM;AACZoB,IAAAA,MAAM,CAACC,SAAP,CAAiBC,IAAjB,CAAsB,QAAtB;AACH,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMC,QAAQ,GAAIC,MAAD,IAAY;AACzBX,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAV,IAAAA,UAAU,CAACW,IAAX,GAAkBW,8BAAlB,CAAiDD,MAAM,CAACE,KAAxD,EAA+DF,MAAM,CAACG,QAAtE,EAAgFC,IAAhF,CAAqF,MAAM;AACvF,YAAMC,WAAW,GAAI,GAAEL,MAAM,CAACM,SAAU,IAAGN,MAAM,CAACO,QAAS,EAA3D;AAEA5B,MAAAA,UAAU,CAACW,IAAX,GAAkBF,WAAlB,CAA8BoB,aAA9B,CAA4C;AACxCH,QAAAA,WAAW,EAAEA;AAD2B,OAA5C,EAEGD,IAFH,CAEQ,MAAM;AACV;AACAK,QAAAA,UAAU,CAAC,MAAM;AACbb,UAAAA,MAAM,CAACC,SAAP,CAAiBa,KAAjB,CAAuB,sBAAvB;AACA1B,UAAAA,QAAQ,CAACK,UAAD,EAAa,aAAb,CAAR;AACH,SAHS,EAGP,IAHO,CAAV;AAIH,OARD;AASH,KAZD,EAYGsB,KAZH,CAYUC,KAAD,IAAW;AAChBvB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAX,MAAAA,OAAO,CAACkC,KAAR,CAAcA,KAAK,CAAClC,OAApB;AACH,KAfD;AAgBH,GAlBD;;AAoBA,sBACI,uDACI,oBAAC,IAAD,qBACI,6CADJ,CADJ,eAII,oBAAC,eAAD,qBACI,oBAAC,cAAD;AAAgB,IAAA,QAAQ,EAAE,IAA1B;AAAgC,IAAA,KAAK,EAAC,SAAtC;AAAgD,IAAA,QAAQ,EAAEqB;AAA1D,IADJ,CAJJ,CADJ;AAUH,CA3CD;;AA6CA,eAAeb,MAAf","sourcesContent":["import React, {useEffect, useState, useContext} from 'react'\nimport {message} from 'antd'\nimport {PopupModal} from '../components/General/PopupModal';\nimport {myFirebase} from '../lib/firebase'\nimport {Onboard} from '../components/OnboardingFlow/Onboard'\nimport { UserContext } from '../lib/UserProvider';\nimport Head from 'next/head'\nimport LoginComponent from '../components/Login/LoginComponent'\nimport { LoginBackground } from '../components/Login/LoginFlowContainer'\nimport OpenPage from '../components/General/OpenPage'\nimport Router from 'next/router'\nimport firebase from 'firebase'\n\nconst SignUp: React.FC = (props) => {\n    const {currentUser, setLoading} = useContext(UserContext)\n    useEffect(() => {\n        myFirebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)\n        if (currentUser !== undefined && currentUser !== null) {\n            OpenPage(setLoading, '/onboarding')\n        }\n    }, [currentUser])\n\n    useEffect(() => {\n        window.analytics.page('Signup')\n    }, [])\n\n    const onFinish = (values) => {\n        setLoading(true)\n        myFirebase.auth().createUserWithEmailAndPassword(values.email, values.password).then(() => {\n            const displayName = `${values.firstName} ${values.lastName}`\n\n            myFirebase.auth().currentUser.updateProfile({\n                displayName: displayName\n            }).then(() => {\n                // Delays are necessary to ensure display name is updated correctly\n                setTimeout(() => {\n                    window.analytics.track('Firebase Auth Signup');\n                    OpenPage(setLoading, '/onboarding')\n                }, 1000)\n            })\n        }).catch((error) => {\n            setLoading(false)\n            message.error(error.message)\n        })\n    }\n\n    return (\n        <>\n            <Head>\n                <title>Sign Up</title>\n            </Head>\n            <LoginBackground>\n                <LoginComponent isSignUp={true} title=\"Sign Up\" onFinish={onFinish}/>\n            </LoginBackground>\n        </>\n    );\n};\n\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}