{"ast":null,"code":"import React, { useEffect, useState, useContext } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport SimpleNavigationBar from '../../components/Profile/SimpleNavigationBar';\nimport Head from 'next/head';\nimport Loading from '../../components/General/Loading';\nimport { getUser, createCommunication } from '../../lib/server';\nimport { Background } from '../dashboard_employer';\nimport { Typography, message, Col, Row } from 'antd';\nimport { UserContext } from '../../lib/UserProvider';\nimport TextAboveAnswer from '../../components/Profile/TextAboveAnswer';\nimport styled from 'styled-components';\nimport { storage_ref } from '../../lib/firebase';\nimport { BigBlackButton } from '../../components/General/BigBlackButton';\nconst TextContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 75%;\n    justify-content: space-between;\n    padding-top: 15px;\n    padding-bottom: 40px;\n`;\nconst UpperFullContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n    padding-right: 40px;\n`;\nconst HeaderTitle = styled(Typography.Title)`\n    font-family: 'Mark Pro Bold';\n    padding-bottom: 20px;\n`;\n\nconst Profile = () => {\n  const {\n    currentUser,\n    changeUser\n  } = useContext(UserContext);\n  const router = useRouter();\n  const {\n    profile_id\n  } = router.query;\n  const [currentProfile, changeCurrentProfile] = useState(undefined);\n  const [profileString, changeProfileString] = useState('Profile');\n  let showStats = currentUser !== null && currentUser.companyName !== undefined;\n  useEffect(() => {\n    if (profile_id === undefined) {\n      return;\n    }\n\n    getUser(profile_id).then(profile => {\n      showStats = showStats && profile['graded'];\n      profile['graded'] = undefined;\n      profile['completedQuiz'] = undefined;\n      profile['communications'] = undefined;\n      profile['id'] = undefined;\n\n      if (showStats) {\n        changeCurrentProfile(profile);\n      } else {\n        profile['grade'] = undefined;\n        changeCurrentProfile(profile);\n      }\n\n      changeProfileString(profile.firstName + \" \" + profile.lastName);\n      window.analytics.page(profileString);\n    }).catch(error => {\n      console.error(error);\n      Router.push('/');\n    });\n  }, [profile_id]);\n\n  const downloadResume = () => {\n    storage_ref.child('resumes/' + currentProfile.resume).getDownloadURL().then(url => {\n      console.log(url);\n      window.open(url, '_blank');\n    }).catch(error => {\n      console.error(error);\n    });\n  };\n\n  const connectWithPerson = async () => {\n    if (showStats) {\n      window.analytics.track(currentUser.companyName + ' connects to designer');\n      const comm = await createCommunication(profile_id, currentUser.id);\n      const newUser = { ...currentUser,\n        communications: [...currentUser.communications, comm.id]\n      };\n      changeUser(newUser);\n      Router.push('/dashboard_employer');\n    } else if (currentUser === null || currentUser.isAnonymous) {\n      // Not logged in\n      Router.push('/signup');\n    } else {\n      // Designer logged in\n      message.info('Only Employers can connect with available Designers');\n    }\n  };\n\n  if (currentProfile === undefined || currentProfile === null) {\n    return /*#__PURE__*/React.createElement(Loading, null);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Head, null, /*#__PURE__*/React.createElement(\"title\", null, profileString)), /*#__PURE__*/React.createElement(SimpleNavigationBar, {\n    subtitle: profileString\n  }, /*#__PURE__*/React.createElement(UpperFullContainer, null, /*#__PURE__*/React.createElement(TextContainer, null, /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Desired Salary',\n    below: currentProfile.salary\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Preferred Role',\n    below: currentProfile.preferredRole\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Quiz',\n    below: currentProfile.designType\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Portfolio',\n    link: currentProfile.portfolio,\n    below: 'Website'\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Resume',\n    onClick: downloadResume,\n    below: 'Download'\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Visa Status',\n    below: currentProfile.visa\n  })), /*#__PURE__*/React.createElement(BigBlackButton, {\n    style: {\n      height: 50\n    },\n    onClick: connectWithPerson\n  }, currentUser === null || currentUser.isAnonymous ? 'Sign Up To' : null, \" Connect\")), /*#__PURE__*/React.createElement(Background, {\n    style: {\n      height: '100%',\n      padding: 64\n    }\n  }, /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Col, {\n    span: 11\n  }, showStats ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(HeaderTitle, {\n    level: 3\n  }, \"Feedback\"), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Score',\n    below: currentProfile.grade.score + '/10'\n  }), /*#__PURE__*/React.createElement(TextAboveAnswer, {\n    above: 'Response',\n    below: currentProfile.grade.response\n  })) : null), /*#__PURE__*/React.createElement(Col, {\n    span: 2\n  }), /*#__PURE__*/React.createElement(Col, {\n    span: 11\n  })))));\n};\n\nexport default Profile;","map":{"version":3,"sources":["/Users/insanity/Documents/personalprojects/sumpixel/client/pages/profile/[profile_id].tsx"],"names":["React","useEffect","useState","useContext","Router","useRouter","SimpleNavigationBar","Head","Loading","getUser","createCommunication","Background","Typography","message","Col","Row","UserContext","TextAboveAnswer","styled","storage_ref","BigBlackButton","TextContainer","div","UpperFullContainer","HeaderTitle","Title","Profile","currentUser","changeUser","router","profile_id","query","currentProfile","changeCurrentProfile","undefined","profileString","changeProfileString","showStats","companyName","then","profile","firstName","lastName","window","analytics","page","catch","error","console","push","downloadResume","child","resume","getDownloadURL","url","log","open","connectWithPerson","track","comm","id","newUser","communications","isAnonymous","info","salary","preferredRole","designType","portfolio","visa","height","padding","grade","score","response"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useContext} from 'react'\nimport Router, { useRouter } from 'next/router'\nimport SimpleNavigationBar from '../../components/Profile/SimpleNavigationBar'\nimport Head from 'next/head'\nimport {User, Employer} from '../../model/model'\nimport Loading from '../../components/General/Loading'\nimport {getUser, createCommunication} from '../../lib/server'\nimport {Background} from '../dashboard_employer'\nimport {Typography, message, Col, Row} from 'antd'\nimport {UserContext} from '../../lib/UserProvider'\nimport TextAboveAnswer from '../../components/Profile/TextAboveAnswer'\nimport styled from 'styled-components'\nimport {storage_ref} from '../../lib/firebase'\nimport {BigBlackButton} from '../../components/General/BigBlackButton'\nimport _ from 'lodash'\n\nconst TextContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 75%;\n    justify-content: space-between;\n    padding-top: 15px;\n    padding-bottom: 40px;\n`\n\nconst UpperFullContainer = styled.div`\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n    padding-right: 40px;\n`\n\nconst HeaderTitle = styled(Typography.Title)`\n    font-family: 'Mark Pro Bold';\n    padding-bottom: 20px;\n`\n\nconst Profile: React.FC = () => {\n    const {currentUser, changeUser}  = useContext(UserContext)\n    const router = useRouter()\n    const { profile_id } = router.query\n    const [currentProfile, changeCurrentProfile]  = useState<User>(undefined)\n    const [profileString, changeProfileString] = useState<string>('Profile')\n    let showStats = currentUser !== null && ((currentUser as Employer).companyName !== undefined)\n\n\n    useEffect(() => {\n        if (profile_id === undefined) {\n            return\n        }\n\n        getUser(profile_id as string).then((profile: User) => {\n            showStats = showStats && profile['graded']\n            profile['graded'] = undefined\n            profile['completedQuiz'] = undefined\n            profile['communications'] = undefined\n            profile['id'] = undefined\n            if (showStats) {\n                changeCurrentProfile(profile)\n            } else {\n                profile['grade'] = undefined\n                changeCurrentProfile(profile)\n            }\n            changeProfileString(profile.firstName + \" \" + profile.lastName)\n            window.analytics.page(profileString)\n        }).catch((error) => {\n            console.error(error)\n            Router.push('/')\n        })\n    }, [profile_id])\n\n    const downloadResume = () => {\n        storage_ref.child('resumes/' + currentProfile.resume).getDownloadURL().then(url => {\n            console.log(url)\n            window.open(url, '_blank')\n        }).catch((error) => {\n            console.error(error)\n        })\n    }\n\n    const connectWithPerson = async () => {\n        if (showStats) {\n            window.analytics.track((currentUser as Employer).companyName + ' connects to designer');\n            const comm = await createCommunication(profile_id as string, currentUser.id)\n            const newUser = {...currentUser, communications: [...currentUser.communications, comm.id]}\n            changeUser(newUser)\n            Router.push('/dashboard_employer')\n        } else if (currentUser === null || (currentUser as Employer).isAnonymous) {\n            // Not logged in\n            Router.push('/signup')\n        } else {\n            // Designer logged in\n            message.info('Only Employers can connect with available Designers')\n        }\n    }\n\n    if (currentProfile === undefined || currentProfile === null) {\n        return (<Loading />)\n    }\n\n    return (<>\n                <Head>\n                    <title>{profileString}</title>\n                </Head>\n                <SimpleNavigationBar \n                    subtitle={profileString}\n                >\n                    <UpperFullContainer>\n                        <TextContainer>\n                            <TextAboveAnswer above={'Desired Salary'} below={currentProfile.salary}/>\n                            <TextAboveAnswer above={'Preferred Role'} below={currentProfile.preferredRole}/>\n                            <TextAboveAnswer above={'Quiz'} below={currentProfile.designType}/>\n                            <TextAboveAnswer above={'Portfolio'} link={currentProfile.portfolio} below={'Website'}/>\n                            <TextAboveAnswer above={'Resume'} onClick={downloadResume} below={'Download'}/>\n                            <TextAboveAnswer above={'Visa Status'} below={currentProfile.visa}/>\n                        </TextContainer>\n                        <BigBlackButton style={{height: 50}} onClick={connectWithPerson}>\n                           {currentUser === null || (currentUser as Employer).isAnonymous ? 'Sign Up To' : null} Connect\n                        </BigBlackButton>\n                    </UpperFullContainer>\n                    <Background style={{height: '100%', padding: 64}}>\n                        <Row>\n                            <Col span={11}>\n                                {showStats ? \n                                    <>\n                                        <HeaderTitle level={3}>Feedback</HeaderTitle>\n                                        <TextAboveAnswer above={'Score'} below={currentProfile.grade.score + '/10'}/>\n                                        <TextAboveAnswer above={'Response'} below={currentProfile.grade.response}/>\n                                    </>\n                                : null}\n                            </Col>\n                            <Col span={2}/>\n                            <Col span={11}>\n                            </Col>\n                        </Row>\n                    </Background>\n                </SimpleNavigationBar>\n            </>)\n}\n\nexport default Profile"]},"metadata":{},"sourceType":"module"}