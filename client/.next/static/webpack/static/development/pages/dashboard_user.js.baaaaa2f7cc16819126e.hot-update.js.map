{"version":3,"file":"static/webpack/static/development/pages/dashboard_user.js.baaaaa2f7cc16819126e.hot-update.js","sources":["webpack:///./components/Dashboard/Designer/ViewCommunications.tsx"],"sourcesContent":["import React, {useContext, useState, useEffect} from 'react'\nimport {UserContext} from '../../../lib/UserProvider'\nimport QuizScreen from '../../OnboardingFlow/Designers/QuizScreen'\nimport {getDesignCommunicationsList, updateDesignerDecision, createUser} from '../../../lib/server'\nimport {User, CommForDesigner, DesignerDecisionTalk} from '../../../model/model'\nimport {Typography, message} from 'antd'\nimport Loading from '../../General/Loading'\nimport CommunicationsList from './CommunicationsList'\nimport styled from 'styled-components'\n\nconst Message = styled(Typography)`\n    padding-bottom: 30px;\n`\n\nconst ViewCommunications: React.FC = (props) => {\n    const {currentUser, changeUser}  = useContext(UserContext)\n    const [commList, setCommList] = useState<CommForDesigner[] | undefined>(undefined)\n\n    const updateUser = async (updatedUser: User) => {\n        changeUser(updatedUser)\n        await createUser(updatedUser)\n    }\n\n    const updateDesignerText = async (commId: string, update: DesignerDecisionTalk) => {\n        window.analytics.track((currentUser as User).firstName + \" \" + (currentUser as User).lastName  + ' updated decision on company - ' + update);\n        await updateDesignerDecision(commId, update)\n        message.success(\"Updated Decision\")\n        setCommList(await getDesignCommunicationsList(currentUser.id))\n    }\n\n    useEffect(() => {\n        getDesignCommunicationsList(currentUser.id).then((commList: CommForDesigner[]) => {\n            setCommList(commList)\n        })\n    }, [])\n\n    if (!((currentUser as User).completedQuiz)) {\n        return (<QuizScreen changeCurrentUser={updateUser}/>)\n    }\n\n    if (!(currentUser as User).graded) {\n        return (<Message>It looks you have not been reviewed by our staff yet. Check back later!</Message>)\n    } else {\n        if ((currentUser as User).communications === null || (currentUser as User).communications === []) {\n            return (<Message>Our employers are currently taking a look at your profile and will reach out if they express interest in you.</Message>)\n        } else {\n            if (commList === undefined) {\n                return (<Loading />)\n            } else {\n                if ((currentUser as User).grade.score === 0) {\n                    return (<Message>I'm sorry. We have chosen not to continue with your application. Please contact us if you have any questions about this decision.</Message>)\n                }\n\n                return (<CommunicationsList communicationList={commList} updateDesignerText={updateDesignerText}/>)\n            }\n        }\n    }\n}\n\nexport default ViewCommunications"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}