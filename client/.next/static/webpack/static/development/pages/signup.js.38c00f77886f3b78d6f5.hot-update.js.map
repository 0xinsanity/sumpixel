{"version":3,"file":"static/webpack/static/development/pages/signup.js.38c00f77886f3b78d6f5.hot-update.js","sources":["webpack:///./pages/signup.tsx"],"sourcesContent":["import React, {useEffect, useState, useContext} from 'react'\nimport {message} from 'antd'\nimport {PopupModal} from '../components/General/PopupModal';\nimport {myFirebase} from '../lib/firebase'\nimport {Onboard} from '../components/OnboardingFlow/Onboard'\nimport { UserContext } from '../lib/UserProvider';\nimport Head from 'next/head'\nimport LoginComponent from '../components/Login/LoginComponent'\nimport { LoginBackground } from '../components/Login/LoginFlowContainer'\nimport OpenPage from '../components/General/OpenPage'\nimport Router from 'next/router'\nimport firebase from 'firebase'\n\nconst SignUp: React.FC = (props) => {\n    const {currentUser, setLoading} = useContext(UserContext)\n    useEffect(() => {\n        myFirebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)\n        if (currentUser !== undefined && currentUser !== null) {\n            OpenPage(setLoading, '/onboarding')\n        }\n    }, [currentUser])\n\n    useEffect(() => {\n        window.analytics.page('Signup')\n    }, [])\n\n    const onFinish = (values) => {\n        setLoading(true)\n        myFirebase.auth().createUserWithEmailAndPassword(values.email, values.password).then((result) => {\n            const displayName = `${values.firstName} ${values.lastName}`\n\n            myFirebase.auth().currentUser.updateProfile({\n                displayName: displayName\n            }).then(() => {\n                setTimeout(() => {\n                    // Delays are necessary to ensure display name is updated correctly\n                    window.analytics.track('Firebase Auth Signup');\n                    OpenPage(setLoading, '/onboarding')\n                }, 1000)\n            })\n        }).catch((error) => {\n            setLoading(false)\n            message.error(error.message)\n        })\n    }\n\n    return (\n        <>\n            <Head>\n                <title>Sign Up</title>\n            </Head>\n            <LoginBackground>\n                <LoginComponent isSignUp={true} title=\"Sign Up\" onFinish={onFinish}/>\n            </LoginBackground>\n        </>\n    );\n};\n\nexport default SignUp;"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;;;;A","sourceRoot":""}