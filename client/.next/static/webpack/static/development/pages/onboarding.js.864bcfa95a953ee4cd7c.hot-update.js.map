{"version":3,"file":"static/webpack/static/development/pages/onboarding.js.864bcfa95a953ee4cd7c.hot-update.js","sources":["webpack:///./components/OnboardingFlow/Onboard.tsx"],"sourcesContent":["import React, { useState, useContext } from 'react'\nimport {OnboardNavbar} from './OnboardNavbar'\nimport {Container} from '../General/Container'\nimport {Typography, Row, Col, message} from 'antd'\nimport {User, NavBarStatus, Employer} from '../../model/model'\nimport FormPersonalData from './Designers/FormPersonalData'\nimport FormBusinessData from './Employers/FormBusinessData'\nimport QuizScreen from './Designers/QuizScreen'\nimport EmployerDesigner from './EmployerDesigner'\nimport styled from 'styled-components'\nimport {UserContext} from '../../lib/UserProvider'\nimport {createUser, createEmployer} from '../../lib/server'\nimport Router from 'next/router'\nimport OpenPage from '../General/OpenPage'\nimport { SumpixelCard } from '../General/SumpixelCard'\nimport BackNext from '../General/BackNext'\nimport {ContainerCard, Question} from './EmployerDesigner'\n\nconst FormContainer = styled.div`\n    max-width: 500px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n`\n\ninterface OnboardProps {\n    deleteUser: () => void\n}\n\nexport const Onboard: React.FC<OnboardProps> = props => {\n    const [currentStep, changeStep] = useState(0);\n    const [navBarStatus, changeNavbarStatus] = useState<NavBarStatus>(NavBarStatus.Undecided);\n    const {currentUser, changeUser, loading, setLoading}  = useContext(UserContext)\n\n    const updateUser = async (updatedUser: User) => {\n        window.analytics.track('Create User');\n        changeUser(updatedUser)\n        await createUser(updatedUser)\n    }\n\n    const updateEmployer = async (updatedUser: Employer) => {\n        window.analytics.track('Create Employer');\n        changeUser(updatedUser)\n        await createEmployer(updatedUser)\n    }\n\n    const backClick = () => {\n        if (currentStep === 0) {\n            props.deleteUser()\n        } else {\n            changeStep(currentStep - 1)\n        }\n    }\n    \n    const nextClick = () => {\n        if (currentStep === 0 && navBarStatus === NavBarStatus.Undecided) {\n            message.error('Please choose whether you are a designer or employer')\n            return\n        } else if (currentStep === 0) {\n            // Without timeout, it automatically calls Next submit\n            setTimeout(() => {\n                changeStep(currentStep + 1)\n            }, 1)\n        }\n    }\n\n    var currentForm;\n    switch (currentStep) {\n        case 0:\n            currentForm = <EmployerDesigner \n                                    currentStatus={navBarStatus}\n                                    deleteUser={props.deleteUser}\n                                    changeNavbarStatus={(newStatus) => changeNavbarStatus(newStatus)}/>;\n            break;\n        case 1:\n            if (navBarStatus == NavBarStatus.Designer) {\n                currentForm = \n                            <ContainerCard style={{paddingBottom: 0}}>\n                                    <Question style={{paddingBottom: 20}}>Let's build your profile.</Question>\n                                    <FormContainer>\n                                        <FormPersonalData \n                                            changeCurrentUser={async (user) => await updateUser(user)}/>                \n                                    </FormContainer>\n                            </ContainerCard>;\n            } else {\n                currentForm =\n                            <ContainerCard style={{paddingBottom: 25}}>\n                                <Question>Let's build your profile.</Question>\n                                    <FormContainer>\n                                        <FormBusinessData \n                                            changeCurrentUser={async (user) => await updateEmployer(user)}/>\n                                    </FormContainer>\n                            </ContainerCard>;\n            }\n            break;\n        case 2:\n            if (navBarStatus == NavBarStatus.Designer) {\n                OpenPage(setLoading, '/dashboard_user')\n            } else {\n                OpenPage(setLoading, '/dashboard_employer')\n            }\n            break;\n    }\n\n    return (\n        <Row gutter={24}>\n            <Col span={24}>\n                <div style={{width: '100%', display: 'flex', justifyContent: 'center', paddingBottom: 40}}>\n                    <img height={50} src={require('../../assets/sumpixel-logo-white.png')}/>\n                </div>\n                <SumpixelCard withLogo={false}>\n                    <OnboardNavbar currentStep={currentStep}/>\n                    <div style={{padding: 20}}>\n                        {currentForm}\n                    </div>\n                    <BackNext backClick={backClick} \n                              nextClick={nextClick} \n                              currentState={currentStep} \n                              status={navBarStatus} />\n                </SumpixelCard>\n            </Col>\n        </Row>\n    );\n}"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAYA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAIA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AADA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAIA;AADA;AAIA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAlCA;AACA;AAoCA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAHA;AAQA;;;;A","sourceRoot":""}